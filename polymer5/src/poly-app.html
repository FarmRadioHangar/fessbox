<link rel="import" href="../bower_components/app-layout/app-drawer-layout/app-drawer-layout.html">
<link rel="import" href="../bower_components/app-layout/app-drawer/app-drawer.html">
<link rel="import" href="../bower_components/app-layout/app-header-layout/app-header-layout.html">
<link rel="import" href="../bower_components/app-layout/app-header/app-header.html">
<link rel="import" href="../bower_components/app-storage/app-network-status-behavior.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/polymer-redux/polymer-redux.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="poly-channel-list.html">
<link rel="import" href="poly-contacts.html">
<link rel="import" href="poly-header.html">
<link rel="import" href="poly-logs.html">
<link rel="import" href="poly-message-list.html">

<dom-module id="poly-app">
  <template>

    <style>

      :host {}

      app-header {
        height: 113px;
      }

    </style>

    <app-drawer-layout force-narrow>

      <app-drawer id="drawer" align="right"></app-drawer>

      <app-header-layout>

        <app-header fixed>
          <poly-header
            selected = "{{selected}}"
            online   = "[[online]]">
          </poly-header>
        </app-header fixed>

        <iron-pages selected=[[selected]]>
          <poly-channel-list></poly-channel-list>
          <poly-message-list></poly-message-list>
          <poly-logs></poly-logs>
          <poly-contacts></poly-contacts>
        </iron-pages>

      </app-header-layout>

    </app-drawer-layout>

  </template>

  <script>
    const initialState = [];

    function messageReducer(state = initialState, action) {
      console.log('Action received: <' + action.type + '>');
      switch (action.type) {
        default:
          return state;
      }
    }

    const store = Redux.createStore(Redux.combineReducers({
      messageReducer,
    }));

    Polymer({

      is: 'poly-app',

      ready() {
        //this.dispatch({
        //  'type': 'XXX'
        //});
      },

      behaviors: [
        Polymer.AppNetworkStatusBehavior, 
        PolymerRedux(store)
      ]

    });
  </script>
</dom-module>
