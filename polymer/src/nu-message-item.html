<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/paper-checkbox/paper-checkbox.html">
<link rel="import" href="../bower_components/paper-item/paper-item-body.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">
<link rel="import" href="../bower_components/polymer/polymer.html">
<link rel="import" href="nu-message-item.html">

<dom-module id="nu-message-item">

  <template>

    <style>

      :host {
      }

      paper-material {
        height: 210px;
        margin: 10px;
        background: white;
        padding: 0 4px 0 12px;
      }

      paper-checkbox {
        padding: 21px 10px;
      }

      .item {
        @apply(--layout-vertical);
      }

      .meta {
        @apply(--layout-horizontal);
        align-items: top;
      }
      
      .date {
        font-size: 12px;
        margin-bottom: 2px;
        text-transform: uppercase;
      }

      .star {
        color: var(--paper-pink-a200); 
      }

      .controls {
        align-self: flex-end;
        @apply(--layout-horizontal);
      }

      paper-item-body {
        justify-content: initial;
        padding: 12px 12px 12px 0;
      }
      
    </style>

    <paper-material>
      <div class="item">

        <div class="meta">
          <paper-item-body style="min-height: 32px;">
            <div secondary class="date">[[formatDate(item.timestamp)]]</div>
            <div>[[item.endpoint]]</div>
          </paper-item-body>
          <paper-checkbox on-tap="toggleSelected" checked="[[selected]]"></paper-checkbox>
        </div>

        <paper-item-body style="min-height: 100px; padding: 0;">
          <div secondary style="white-space: normal;">
            [[item.content]]
          </div>
        </paper-item-body>

        <div class="controls">
          <paper-icon-button 
            on-tap = "onToggleFavorite"
            icon   = "star"
            class  = "star">
          </paper-icon-button>
          <paper-icon-button 
            on-tap = "onTapActionMenu"
            icon   = "more-vert">
          </paper-icon-button>
        </div>

      </div>
    </paper-material>

  </template>

  <script>

    Polymer({

      is: "nu-message-item",

      formatDate: function(stamp) {
        return moment(Number(stamp)).format("ddd, MMM Do YYYY, h:mm:ss a"); 
      },

      onTapActionMenu: function(event) {
        this.fire('tap-action-menu');
      },

      onToggleFavorite: function(event) {
      },

      toggleSelected: function(event) {
        this.fire('toggle-selected');
      },

      properties: {
        selected: {
          type: Boolean,
          value: false
        }
      }

    });

  </script>

</dom-module>
